<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepSeek-like Web Page</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1>DeepSeek-like Web Page</h1>
        <input type="file" id="fileInput" accept=".pdf,.docx,.txt">
        <input type="text" id="questionInput" placeholder="Ask a question about the file">
        <button id="submitButton" onclick="submitQuestion()" disabled>Submit</button>
        <div id="output"></div>

        <!-- Action Buttons with Icons -->
        <div class="action-buttons">
            <button id="copyButton" class="copy" disabled><i class="fas fa-copy"></i> Copy</button>
            <button id="regenerateButton" class="regenerate" disabled><i class="fas fa-sync-alt"></i> Regenerate</button>
            <button id="likeButton" class="like" disabled><i class="fas fa-thumbs-up"></i> Like</button>
            <button id="dislikeButton" class="dislike" disabled><i class="fas fa-thumbs-down"></i> Dislike</button>
            <button id="newChatButton" class="new-chat" disabled><i class="fas fa-comment-alt"></i> New Chat</button>
        </div>
    </div>

    <script>
        const fileInput = document.getElementById('fileInput');
        const submitButton = document.getElementById('submitButton');
        const copyButton = document.getElementById('copyButton');
        const regenerateButton = document.getElementById('regenerateButton');
        const likeButton = document.getElementById('likeButton');
        const dislikeButton = document.getElementById('dislikeButton');
        const newChatButton = document.getElementById('newChatButton');

        // Function to enable/disable buttons based on file input
        function toggleButtons() {
            if (fileInput.files.length > 0) {
                submitButton.disabled = false;
                copyButton.disabled = false;
                regenerateButton.disabled = false;
                likeButton.disabled = false;
                dislikeButton.disabled = false;
                newChatButton.disabled = false;
            } else {
                submitButton.disabled = true;
                copyButton.disabled = true;
                regenerateButton.disabled = true;
                likeButton.disabled = true;
                dislikeButton.disabled = true;
                newChatButton.disabled = true;
            }
        }

        // Add event listener to file input
        fileInput.addEventListener('change', toggleButtons);

        async function submitQuestion() {
            const questionInput = document.getElementById('questionInput');
            const output = document.getElementById('output');

            if (!fileInput.files[0] || !questionInput.value.trim()) {
                output.innerText = 'Please upload a file and enter a question.';
                return;
            }

            const formData = new FormData();
            formData.append('file', fileInput.files[0]);
            formData.append('question', questionInput.value.trim());

            try {
                const response = await fetch('/ask', {
                    method: 'POST',
                    body: formData,
                });
                const data = await response.json();
                output.innerText = data.answer || 'No answer found.';
            } catch (error) {
                output.innerText = 'An error occurred. Please try again.';
            }
        }
    </script>
</body>
</html>